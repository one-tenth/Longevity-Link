name: EAS Build on Push

# âŒ è¨»è§£æ‰è‡ªå‹•è§¸ç™¼æ¢ä»¶ï¼ˆé€™æ¨£ä¸æœƒåœ¨ push æ™‚è‡ªå‹•åŸ·è¡Œï¼‰
# on:
#   push:
#     branches:
#       - main  # æ”¹æˆä½ è¦è§¸ç™¼çš„åˆ†æ”¯ï¼Œä¾‹å¦‚ mainã€devã€feature/x

jobs:
  build:
    runs-on: ubuntu-latest

    defaults:
      run:
        working-directory: ./front-end  # ğŸ‘ˆ EAS å°ˆæ¡ˆåœ¨ front-end å­è³‡æ–™å¤¾

    steps:
      - uses: actions/checkout@v3

      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Install EAS CLI
        run: npm install -g eas-cli

      - name: Install dependencies
        run: npm install

      - name: Run EAS Build (Android)
        run: eas build --platform android --profile preview --non-interactive
        env:
          EXPO_TOKEN: ${{ secrets.EXPO_TOKEN }}
